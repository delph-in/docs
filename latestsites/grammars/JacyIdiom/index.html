<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>DELPH-IN</title>
<meta name="description" content="DELPH-IN Documentation">


  <meta name="author" content="DELPH-IN">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="DELPH-IN">
<meta property="og:title" content="DELPH-IN">
<meta property="og:url" content="https://delph-in.github.io/docs/grammars/JacyIdiom/">


  <meta property="og:description" content="DELPH-IN Documentation">











  

  


<link rel="canonical" href="https://delph-in.github.io/docs/grammars/JacyIdiom/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "DELPH-IN",
      "url": "https://delph-in.github.io/docs/grammars/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/docs/grammars/feed.xml" type="application/atom+xml" rel="alternate" title="DELPH-IN Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/docs/grammars/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--delphin_page wide">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/docs/grammars/"><img src="/docs/grammars/assets/images/Delph-In.png" alt="DELPH-IN"></a>
        
        <a class="site-title" href="/docs/grammars/">
          DELPH-IN
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/home/Home">Home</a>
            </li><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/howto/DelphinWelcome">How-To</a>
            </li><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/erg/ErgTop">ERG</a>
            </li><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/tools/ToolsTop">Tools</a>
            </li><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/grammars/GrammarsOverview">Grammars</a>
            </li><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/matrix/MatrixDocsOverview">Matrix</a>
            </li><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/summits/SummitTop">Summits</a>
            </li><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/garage/GarageTop">Garage</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Grammar Catalog</span>
        

        
        <ul>
          
            <li><a href="/docs/grammars/GrammarsOverview/">Overview</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Norwegian</span>
        

        
        <ul>
          
            <li><a href="/docs/grammars/NorsourceTop/">Overview</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Chinese (Zhong)</span>
        

        
        <ul>
          
            <li><a href="/docs/grammars/ZhongTop/">Overview</a></li>
          
            <li><a href="/docs/grammars/ZhongGeneration/">Generation</a></li>
          
            <li><a href="/docs/grammars/ZhongYYMode/">YY Mode</a></li>
          
            <li><a href="/docs/grammars/ZhongCoverage/">Coverage</a></li>
          
            <li><a href="/docs/grammars/ZhongAce/">Ace</a></li>
          
            <li><a href="/docs/grammars/ZhongPreprocessing/">Preprocessing</a></li>
          
            <li><a href="/docs/grammars/ZhongTranslation/">Translation</a></li>
          
            <li><a href="/docs/grammars/ZhongRegressionTest/">Regression Test</a></li>
          
            <li><a href="/docs/grammars/ZhongHistory/">History</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Japanese (JACY)</span>
        

        
        <ul>
          
            <li><a href="/docs/grammars/JacyTop/">Overview</a></li>
          
            <li><a href="/docs/grammars/JacySummary/">Summary</a></li>
          
            <li><a href="/docs/grammars/JacyDoc/">Documentation</a></li>
          
            <li><a href="/docs/grammars/JacyInstallation/">Installation</a></li>
          
            <li><a href="/docs/grammars/JacyLexTypes/">Lexical Types</a></li>
          
            <li><a href="/docs/grammars/JacyValence/">Valence</a></li>
          
            <li><a href="/docs/grammars/JacyMorphology/">Morphology</a></li>
          
            <li><a href="/docs/grammars/JacyGeneration/">Generation</a></li>
          
            <li><a href="/docs/grammars/JacyIdiom/" class="active">Idiom</a></li>
          
            <li><a href="/docs/grammars/JacyNumbers/">Numbers</a></li>
          
            <li><a href="/docs/grammars/JacyLexDb/">LexDb</a></li>
          
            <li><a href="/docs/grammars/JacyPerformance/">Performance</a></li>
          
            <li><a href="/docs/grammars/JacyHinoki/">Hinoki</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Other Grammars</span>
        

        
        <ul>
          
            <li><a href="/docs/grammars/GrammarCatalogue/">Overview</a></li>
          
            <li><a href="/docs/grammars/AraGram/">Arabic</a></li>
          
            <li><a href="/docs/grammars/BitseSummary/">Bitse</a></li>
          
            <li><a href="/docs/grammars/ErgSummary/">ERG</a></li>
          
            <li><a href="/docs/grammars/CheetahTop/">German</a></li>
          
            <li><a href="/docs/grammars/MgrgSummary/">Greek</a></li>
          
            <li><a href="/docs/grammars/HeGram/">Hebrew</a></li>
          
            <li><a href="/docs/grammars/IndraTop/">Indonesian (INDRA)</a></li>
          
            <li><a href="/docs/grammars/KrgTop/">Korean</a></li>
          
            <li><a href="/docs/grammars/MandarinGrammarOnline/">Mandarin </a></li>
          
            <li><a href="/docs/grammars/NorsourceSummary/">Norwegian Summary</a></li>
          
            <li><a href="/docs/grammars/NorsourceDownload/">Norwegian Download</a></li>
          
            <li><a href="/docs/grammars/PhdgramSummary/">Phdgram </a></li>
          
            <li><a href="/docs/grammars/RussianQuestionsGrammarTop/">Russian</a></li>
          
            <li><a href="/docs/grammars/SlavicTop/">Slavic</a></li>
          
            <li><a href="/docs/grammars/WambayaTop/">Wambaya</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">MRS Tests</span>
        

        
        <ul>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuite/">Overview</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuiteBg/">Bulgarian</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuiteCantonese/">Cantonese</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsCatb/">Cathedral Test</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuiteEn/">English</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuiteFr/">French</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuiteDe/">German</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuiteGr/">Greek</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuiteIndonesian/">Indonesian</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuiteJa/">Japanese</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuiteMandarin/">Mandarin</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuiteNo/">Norwegian</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuitePt/">Portuguese</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuiteRu/">Russian</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuiteSv/">Swedish</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuiteTatoeba/">Tatoeba</a></li>
          
            <li><a href="/docs/grammars/MatrixMrsTestSuiteZhTw/">ZhTw</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
        <p>Contents</p>

<ol>
  <li><a href="https://delph-in.github.io/docs/grammars/JacyIdiom#Overview_of_LKB.27s_idiom_detection_mechanism">Overview of LKB’s idiom detection
mechanism</a></li>
  <li><a href="https://delph-in.github.io/docs/grammars/JacyIdiom#Example">Example</a></li>
  <li><a href="https://delph-in.github.io/docs/grammars/JacyIdiom#Implementation">Implementation</a>
    <ol>
      <li><a href="https://delph-in.github.io/docs/grammars/JacyIdiom#idioms.mtr_and_mtr.tdl">idioms.mtr and mtr.tdl</a></li>
      <li><a href="https://delph-in.github.io/docs/grammars/JacyIdiom#The_Lexicon">The Lexicon</a></li>
      <li><a href="https://delph-in.github.io/docs/grammars/JacyIdiom#Configuration_of_Relevant_Rules">Configuration of Relevant
Rules</a>
        <ol>
          <li><a href="https://delph-in.github.io/docs/grammars/JacyIdiom#matrix.tdl">matrix.tdl</a></li>
          <li><a href="https://delph-in.github.io/docs/grammars/JacyIdiom#fundamentals.tdl">fundamentals.tdl</a></li>
          <li><a href="https://delph-in.github.io/docs/grammars/JacyIdiom#rule-types.tdl">rule-types.tdl</a></li>
        </ol>
      </li>
      <li><a href="https://delph-in.github.io/docs/grammars/JacyIdiom#roots.tdl.2C_script.2C_user-fns.lsp.2C_and_globals.lsp">roots.tdl, script, user-fns.lsp, and
globals.lsp</a>
        <ol>
          <li><a href="https://delph-in.github.io/docs/grammars/JacyIdiom#roots.tdl">roots.tdl</a></li>
          <li><a href="https://delph-in.github.io/docs/grammars/JacyIdiom#script">script</a></li>
          <li><a href="https://delph-in.github.io/docs/grammars/JacyIdiom#user-fns.lsp">user-fns.lsp</a></li>
          <li><a href="https://delph-in.github.io/docs/grammars/JacyIdiom#globals.lsp">globals.lsp</a></li>
        </ol>
      </li>
    </ol>
  </li>
</ol>

<p>This page describes how to implement idioms in a DELPH-IN Grammar,
taking <a href="https://delph-in.github.io/docs/grammars/JacyTop">Jacy</a> as an example. The basic idea is that
<a href="https://delph-in.github.io/docs/tools/LkbTop">LKB</a> checks if all the constituents (or PREDs) of an idiom
appear in an (MRS output of) sentence.</p>

<h1 id="overview-of-lkbs-idiom-detection-mechanism">Overview of LKB’s idiom detection mechanism</h1>

<p>LKB has an idiom detection mechanism that is realized by making use of
its Machine Translation mechanism.</p>

<p>The idiom detection mechanism is invoked after parsing a sentence. Then</p>

<ol>
  <li>It examines whether the sentence is specified as [IDIOM +]. Unless
[IDIOM +], no further processing is invoked.</li>
  <li>If [IDIOM +], the mechanism consults with idioms.mtr (and
mtr.tdl), which is a list of idioms, to see if the sentence contains
all the constituents of an idiom. If so, the sentence is accepted
and certified as containing an idiom. On the contrary, if the
sentence does not have all the constituents of an idiom even though
it is [IDIOM +], it is rejected.</li>
</ol>

<h1 id="example">Example</h1>

<p>Imagine that you want to implement a Japanese idiom, <em>yaku-ni tatsu</em>
(part-DAT stand) “useful”.</p>

<p>All the constituents of the idiom can be used independently and
represent a literal meaning, but this particular combination only
represents an idiomatic meaning.</p>

<p>Below are examples of how to use the literal meaning <em>tatsu</em> (a) and the
idiomatic meaning <em>tatsu</em> (b).</p>

<ol>
  <li>
    <ol>
      <li><em>Ken-ga butai-ni tatsu.</em> (Ken-NOM stage-DAT stand) “Ken appears
on stage.”</li>
    </ol>
  </li>
  <li>
    <ol>
      <li><em>Ken-ga yaku-ni tatsu.</em> (Ken-NOM part-DAT stand) “Ken is
useful.”</li>
    </ol>
  </li>
</ol>

<p>Then, imagine that you want to have both the literal meaning <em>tatsu</em>
(tatsu_lit, hereafter) and the idiomatic meaning <em>tatsu</em> (tatsu_idiom)
in your grammar. And you also want tatsu_idiom to appear only when all
the other constituents of the idiom, <em>yaku-ni tatsu</em> (part-DAT stand)
“useful”, appear in a sentence.</p>

<h1 id="implementation">Implementation</h1>

<p>You need following configuration.</p>

<ul>
  <li>List all idioms in idioms.mtr (and mtr.tdl).</li>
  <li>For each idiom, add one of its constituents in the lexicon file. In
the case of <em>yaku-ni tatsu</em>, <em>tatsu</em> is newly entered into the
lexicon as tatsu_idiom. So there are tatsu_lit and tatsu_idiom in
the lexicon. Note that the newly entered lexical item for an idiom
introduces [IDIOM  +] into the feature structure of sentence.</li>
  <li>Configure relevant rules in your grammar so that the [IDIOM +]
goes up into the syntactic structure. This configuration would be
grammar-dependent.</li>
  <li>Configure roots.tdl, script, user-fns.lsp, and globals.lsp to invoke
the idiom dtection mechanism.</li>
</ul>

<h2 id="idiomsmtr-and-mtrtdl">idioms.mtr and mtr.tdl</h2>

<p>Here is an example of how to list idioms in idioms.mtr (and mtr.tdl).</p>

<p>Below is the case of <em>yaku-ni tatsu</em>. Note that <em>yaku-ni</em> is the ARG2 of
<em>tatsu</em>.</p>

<p>idioms.mtr</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yaku+ni+tatsu := np_v_idiom_mtr &amp;
  [ INPUT.RELS &lt;! [ PRED "_tatsu_v_i_rel" ],
                  [ PRED "_yaku_n_rel" ] !&gt; ].
</code></pre></div></div>

<p>mtr.tdl</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>np_v_idiom_mtr := monotonic_mtr &amp;
  [ INPUT.RELS &lt;! [ LBL handle,
                    ARG0 event,
                    ARG1 ref-ind,
                    ARG2 ref-ind &amp; #arg2 ],
                [ LBL handle,
                  ARG0 #arg2 ] !&gt;,
    OUTPUT.RELS &lt;! !&gt; ].
</code></pre></div></div>

<h2 id="the-lexicon">The Lexicon</h2>

<p>Here is the lexical entry for tatsu_idiom.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tatsu_idiom := v2-c-stem-lex &amp;
 [SYNSEM.LKEYS [KEYREL [PRED '_tatsu_v_i_rel]],
  ORTH &lt;! "立つ" !&gt;,
  IDIOM +].
</code></pre></div></div>

<p>Note that v2-c-stem-lex is the lexical type for a transitive verb that
takes a dative argument, and that this introduces [IDIOM +].</p>

<h2 id="configuration-of-relevant-rules">Configuration of Relevant Rules</h2>

<p>Below are configurations of the grammar so that it lifts [IDIOM +] up
into the syntax. Most of them would be Jacy-dependent.</p>

<h3 id="matrixtdl">matrix.tdl</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sign := basic-sign &amp;
  [ SYNSEM synsem,
    ARGS list,
    INFLECTED bool,
    ROOT bool,
    IDIOM bool].
</code></pre></div></div>

<p>Note that the IDIOM feature is introduced.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lex-rule := phrase-or-lexrule &amp; word-or-lexrule &amp;
  [ IDIOM #idiom,
    NEEDS-AFFIX bool,
    SYNSEM.LOCAL.CONT.RELS [ LIST #first,
                             LAST #last ],
    DTR #dtr &amp; word-or-lexrule &amp;
        [ SYNSEM.LOCAL.CONT.RELS [ LIST #first,
                                   LAST #middle ],
          ALTS #alts,
          IDIOM #idiom],
    C-CONT.RELS [ LIST #middle,
                  LAST #last ],
    ALTS #alts,
    ARGS &lt; #dtr &gt; ].
</code></pre></div></div>

<p>Note [IDIOM #idiom].</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>basic-unary-phrase := phrase &amp;
  [ STEM #stem,
    IDIOM #idiom,
    SYNSEM.LOCAL.CONT [ RELS [ LIST #first,
                               LAST #last ],
                        HCONS [ LIST #scfirst,
                                LAST #sclast ] ],
    C-CONT [ RELS [ LIST #middle,
                    LAST #last ],
             HCONS [ LIST #scmiddle,
                     LAST #sclast ] ],
    ARGS &lt; sign &amp; [ STEM #stem,
                    SYNSEM.LOCAL local &amp;
                                 [ CONT [ RELS [ LIST #first,
                                                 LAST #middle ],
                                          HCONS [ LIST #scfirst,
                                                  LAST #scmiddle ] ] ],
                    ROOT -,
                    IDIOM #idiom] &gt; ].
</code></pre></div></div>

<p>Note [IDIOM #idiom].</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>basic-binary-phrase := phrase &amp;
  [ IDIOM #idiom,
    SYNSEM.LOCAL.CONT [ RELS [ LIST #first,
                               LAST #last ],
                        HCONS [ LIST #scfirst,
                                LAST #sclast ] ],
    C-CONT [ RELS [ LIST #middle2,
                    LAST #last ],
             HCONS [ LIST #scmiddle2,
                     LAST #sclast ] ],
    ARGS &lt; sign &amp; [ IDIOM #idiom,
                    SYNSEM.LOCAL local &amp;
                                 [ CONT [ RELS [ LIST #first,
                                                 LAST #middle1 ],
                                          HCONS [ LIST #scfirst,
                                                  LAST #scmiddle1 ] ] ],
                    ROOT - ],
           sign &amp; [ IDIOM #idiom,
                    SYNSEM.LOCAL local &amp;
                                 [ CONT [ RELS [ LIST #middle1,
                                                 LAST #middle2 ],
                                          HCONS [ LIST #scmiddle1,
                                                  LAST #scmiddle2 ] ] ],
                    ROOT - ] &gt; ].
</code></pre></div></div>

<p>Note [IDIOM #idiom].</p>

<h3 id="fundamentalstdl">fundamentals.tdl</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lexical_sign-rule := lexical_sign &amp; phrase-or-lexrule &amp;
 [IDIOM #idiom,
  ARGS &lt;[IDIOM #idiom]&gt;].
</code></pre></div></div>

<h3 id="rule-typestdl">rule-types.tdl</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>unary-type-super :=   phrasal_sign &amp;
               [IDIOM #idiom,
                SYNSEM [LOCAL [CTXT [C-INDICES [ADDRESSEE #add,
                                                SPEAKER #sp],
                                     EMPATHY [EMPER #sp,
                                              EMPEE #emp]],
                               CONT [HOOK #hook,
                                     RELS [LIST #list,
                                            LAST #last],
                                     HCONS [LIST #sclist,
                                             LAST #sclast]]],
                        NON-LOCAL #nonloc],
                ORTH #stem,
               C-CONT mrs &amp; [HOOK #hook,
                              RELS diff-list &amp; [LIST #list,
                                                   LAST #middle],
                              HCONS diff-list &amp; [LIST #sclist,
                                                    LAST #scmiddle]],
                ARGS &lt;  [IDIOM #idiom,
                         SYNSEM [LOCAL [CTXT [C-INDICES [ADDRESSEE #add,
                                                                   SPEAKER #sp],
                                                           EMPATHY [EMPER #sp,
                                                                    EMPEE #emp]],
                                                     CONT [RELS [LIST #middle,
                                                                  LAST #last],
                                                           HCONS [LIST #scmiddle,
                                                                   LAST #sclast]]],
                                              NON-LOCAL #nonloc],
                                      ORTH #stem] &gt;].
</code></pre></div></div>

<p>Note [IDIOM #idiom].</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>word2word-rule := j-sign &amp; phrase-or-lexrule &amp;
            [IDIOM #idiom,
             SYNSEM [LOCAL [CAT [HEAD #head],
                            BAR #bar,
                            CONT [HOOK #hook,
                                  RELS diff-list &amp; [LIST #list,
                                                    LAST #last],
                                  HCONS [LIST #hclist,
                                          LAST #hclast]],
                            CTXT #ctxt],
                     NON-LOCAL #nonloc,
                     MODIFIED.PERIPH #per],
             ORTH #stem,
             INFLECTED +,
             J-NEEDS-AFFIX #aff,
             LMORPH-BIND-TYPE #lmorph,
             RMORPH-BIND-TYPE #rmorph,
             C-CONT [RELS [LIST #middle,
                            LAST #last],
                     HCONS [LIST #hcmiddle,
                              LAST #hclast]],
             ARGS &lt;[IDIOM #idiom,
                    SYNSEM [LOCAL [CAT [HEAD #head],
                                   BAR #bar,
                                   CONT [HOOK #hook,
                                         RELS [LIST #list,
                                                LAST #middle],
                                         HCONS [LIST #hclist,
                                                 LAST #hcmiddle]],
                                   CTXT #ctxt],
                            MODIFIED.PERIPH #per,
                            NON-LOCAL #nonloc],
                    INFLECTED +,
                    ORTH #stem,
                    J-NEEDS-AFFIX #aff,
                    LMORPH-BIND-TYPE #lmorph,
                    RMORPH-BIND-TYPE #rmorph]&gt;].
</code></pre></div></div>

<p>Note [IDIOM #idiom].</p>

<h2 id="rootstdl-script-user-fnslsp-and-globalslsp">roots.tdl, script, user-fns.lsp, and globals.lsp</h2>

<p>Just copy and paste the following descriptions.</p>

<h3 id="rootstdl">roots.tdl</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>; Used to determine on which candidate root edges to not apply the idiom checks
; (for efficiency)
root_non_idiom := sign &amp;
  [ IDIOM - ].
</code></pre></div></div>

<h3 id="script">script</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(read-tdl-type-files-aux
     (list (lkb-pathname (parent-directory) "mtr.tdl") 
))

(mt:read-transfer-rules 
 (list
  (lkb-pathname (parent-directory) "idioms.mtr"))
 "Idiom Tests"
 :filter nil :task :idiom)
</code></pre></div></div>

<h3 id="user-fnslsp">user-fns.lsp</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(defun idiom-complete-p (tdfs)
  (let* ((mrs (and (tdfs-p tdfs)
                   (mrs::extract-mrs-from-fs (tdfs-indef tdfs))))
         (transfers (and (mrs::psoa-p mrs)
                         (mt:transfer-mrs mrs :task :idiom))))
    (loop
        for transfer in transfers
        for mrs = (mt::edge-mrs transfer)
        thereis (loop
                    for ep in (mrs:psoa-liszt mrs)
                    when (idiom-rel-p ep) return nil
                    finally (return t)))))

(eval-when #+:ansi-eval-when (:load-toplevel :execute)
           #-:ansi-eval-when (load eval)
  (setf *additional-root-condition* #'idiom-complete-p))
</code></pre></div></div>

<h3 id="globalslsp">globals.lsp</h3>

<p>Finally, the presence of the following is what actually turns on idiom
processing in the LKB. When *non-idiom-root* is configured, <em>all</em>
completed parses (spanning parses which match a root condition) are
checked for idioms, <em>except</em> for those which are compatible with the
instance specified.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(defparameter *non-idiom-root*
    'root_non_idiom )
</code></pre></div></div>

<p>Last update: 2011-12-06 by GlennSlayden [<a href="https://github.com/delph-in/docs/wiki/JacyIdiom/_edit">edit</a>]</p>

        
      </section>

      <footer class="page__meta">
        
        


        


      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

<!--Scroll the navbar to the current page-->
<script type="text/javascript">
  let el = document.querySelector('.nav__list .active');
  if(el){
    el.scrollIntoView({block: "center", inline: "start"});
  }
</script>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/docs/grammars/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 DELPH-IN. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/docs/grammars/assets/js/main.min.js"></script>




<script src="/docs/grammars/assets/js/lunr/lunr.min.js"></script>
<script src="/docs/grammars/assets/js/lunr/lunr-store.js"></script>
<script src="/docs/grammars/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
