<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>DELPH-IN</title>
<meta name="description" content="DELPH-IN Documentation">


  <meta name="author" content="DELPH-IN">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="DELPH-IN">
<meta property="og:title" content="DELPH-IN">
<meta property="og:url" content="https://delph-in.github.io/docs/tools/LkbGeneration/">


  <meta property="og:description" content="DELPH-IN Documentation">











  

  


<link rel="canonical" href="https://delph-in.github.io/docs/tools/LkbGeneration/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "DELPH-IN",
      "url": "https://delph-in.github.io/docs/tools/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/docs/tools/feed.xml" type="application/atom+xml" rel="alternate" title="DELPH-IN Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/docs/tools/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--delphin_page wide">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/docs/tools/"><img src="/docs/tools/assets/images/Delph-In.png" alt="DELPH-IN"></a>
        
        <a class="site-title" href="/docs/tools/">
          DELPH-IN
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/home/Home">Home</a>
            </li><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/howto/DelphinWelcome">How-To</a>
            </li><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/erg/ErgTop">ERG</a>
            </li><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/tools/ToolsTop">Tools</a>
            </li><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/grammars/GrammarsOverview">Grammars</a>
            </li><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/matrix/MatrixDocsOverview">Matrix</a>
            </li><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/summits/SummitTop">Summits</a>
            </li><li class="masthead__menu-item">
              <a href="https://delph-in.github.io/docs/garage/GarageTop">Garage</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Tools</span>
        

        
        <ul>
          
            <li><a href="/docs/tools/ToolsTop/">Overview</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">PyDelphin</span>
        

        
        <ul>
          
            <li><a href="/docs/tools/PyDelphinTop/">Overview</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">LKB</span>
        

        
        <ul>
          
            <li><a href="/docs/tools/LkbTop/">Overview</a></li>
          
            <li><a href="/docs/tools/LkbInstallation/">Installation</a></li>
          
            <li><a href="/docs/tools/LkbFos/">Fully Open Source Version</a></li>
          
            <li><a href="/docs/tools/LkbMacintosh/">Macintosh Version</a></li>
          
            <li><a href="/docs/tools/LkbCourses/">Courses</a></li>
          
            <li><a href="/docs/tools/LkbConventions/">Conventions</a></li>
          
            <li><a href="/docs/tools/LkbGeneration/" class="active">Generation</a></li>
          
            <li><a href="/docs/tools/LkbCompilation/">Compilation</a></li>
          
            <li><a href="/docs/tools/LkbEmacs/">Emacs</a></li>
          
            <li><a href="/docs/tools/LkbTrollet/">Trollet</a></li>
          
            <li><a href="/docs/tools/LkbSppp/">Simple PreProcessor Protocol</a></li>
          
            <li><a href="/docs/tools/RmrsVpm/">Variable Property Mapping (VPM)</a></li>
          
            <li><a href="/docs/tools/LkbLpconstraints/">LkbLpconstraints</a></li>
          
            <li><a href="/docs/tools/LkbUserGroup/">User Group</a></li>
          
            <li><a href="/docs/tools/LkbFaq/">FAQ</a></li>
          
            <li><a href="/docs/tools/LkbMode/">Emacs FAQ</a></li>
          
            <li><a href="/docs/tools/LkbWishlist/">Wish list</a></li>
          
            <li><a href="/docs/tools/LkbBugs/">Bugs</a></li>
          
            <li><a href="/docs/tools/LkbCopyright/">Copyright</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">ACE Parser</span>
        

        
        <ul>
          
            <li><a href="/docs/tools/AceTop/">Overview</a></li>
          
            <li><a href="/docs/tools/AceInstall/">Install</a></li>
          
            <li><a href="/docs/tools/AceConfiguration/">Configuration</a></li>
          
            <li><a href="/docs/tools/AceOptions/">Options</a></li>
          
            <li><a href="/docs/tools/AceUse/">Examples</a></li>
          
            <li><a href="/docs/tools/AceLui/">LUI Mode</a></li>
          
            <li><a href="/docs/tools/AceCsaw/">Csaw</a></li>
          
            <li><a href="/docs/tools/AceTransfer/">Transfer</a></li>
          
            <li><a href="/docs/tools/AceExperimental/">Experimental</a></li>
          
            <li><a href="/docs/tools/AceFaq/">Faq</a></li>
          
            <li><a href="/docs/tools/AceWishlist/">Wish list</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">LKB LUI</span>
        

        
        <ul>
          
            <li><a href="/docs/tools/LkbLui/">Overview</a></li>
          
            <li><a href="/docs/tools/LuiRc/">User Configuration</a></li>
          
            <li><a href="/docs/tools/LuiUi/">UI Quick Reference</a></li>
          
            <li><a href="/docs/tools/LuiTree/">Tree</a></li>
          
            <li><a href="/docs/tools/LuiAvm/">Feature Structure (AVM)</a></li>
          
            <li><a href="/docs/tools/LuiUnification/">Unification</a></li>
          
            <li><a href="/docs/tools/LuiMrs/">MRS Display</a></li>
          
            <li><a href="/docs/tools/LuiChart/">Chart Browser</a></li>
          
            <li><a href="/docs/tools/LuiWishlist/">Wish list</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">LKB LexDB</span>
        

        
        <ul>
          
            <li><a href="/docs/tools/LexDbSimplePsql/">Simple PSQL</a></li>
          
            <li><a href="/docs/tools/LexDbInitialize/">Initialization</a></li>
          
            <li><a href="/docs/tools/LexDbPsqlInitialize/">PSQL Initialization</a></li>
          
            <li><a href="/docs/tools/LexDbFieldMappings/">Field Mappings</a></li>
          
            <li><a href="/docs/tools/LkbLexDbMultiUser/">Multi-User</a></li>
          
            <li><a href="/docs/tools/LkbLexDbSingleUser/">Single User</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">[incr tsdb()]</span>
        

        
        <ul>
          
            <li><a href="/docs/tools/ItsdbTop/">Overview</a></li>
          
            <li><a href="/docs/tools/TsdbTop/">Deep Dive</a></li>
          
            <li><a href="/docs/tools/ItsdbDerivations/">Derivations</a></li>
          
            <li><a href="/docs/tools/ItsdbProfileManipulation/">Profile Manipulation</a></li>
          
            <li><a href="/docs/tools/ItsdbProfile/">Profile</a></li>
          
            <li><a href="/docs/tools/ItsdbProfiling/">Profiling</a></li>
          
            <li><a href="/docs/tools/ItsdbDistributedProcessing/">Distributed Processing</a></li>
          
            <li><a href="/docs/tools/ItsdbBatch/">Batch</a></li>
          
            <li><a href="/docs/tools/ItsdbReference/">Reference</a></li>
          
            <li><a href="/docs/tools/ItsdbTroubleshooting/">Troubleshooting</a></li>
          
            <li><a href="/docs/tools/GeFaqTsdbRc/">FAQ</a></li>
          
            <li><a href="/docs/tools/ItsdbWishlist/">Wish List</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Logon</span>
        

        
        <ul>
          
            <li><a href="/docs/tools/LogonTop/">Overview</a></li>
          
            <li><a href="/docs/tools/LogonInstallation/">Installation</a></li>
          
            <li><a href="/docs/tools/LogonRedhat/">Red Hat</a></li>
          
            <li><a href="/docs/tools/LogonUbuntu/">Ubuntu</a></li>
          
            <li><a href="/docs/tools/LogonArch/">Arch Linux</a></li>
          
            <li><a href="/docs/tools/LogonDebian/">Debian</a></li>
          
            <li><a href="/docs/tools/LogonHandon/">Hands-On Release</a></li>
          
            <li><a href="/docs/tools/LogonSvn/">SVN</a></li>
          
            <li><a href="/docs/tools/LogonProcessing_BatchGeneration/">Batch Generation</a></li>
          
            <li><a href="/docs/tools/LogonProcessing_BatchTranslation/">Batch Translation</a></li>
          
            <li><a href="/docs/tools/LogonPet/">PET Integration</a></li>
          
            <li><a href="/docs/tools/LogonAnswer/">ACE Integration</a></li>
          
            <li><a href="/docs/tools/LogonExtras/">Extras</a></li>
          
            <li><a href="/docs/tools/LogonReports/">Reports</a></li>
          
            <li><a href="/docs/tools/LogonProcessing/">Processing</a></li>
          
            <li><a href="/docs/tools/LogonProcessing_BatchParsing/">Batch Parsing</a></li>
          
            <li><a href="/docs/tools/LogonModeling/">Modeling</a></li>
          
            <li><a href="/docs/tools/LogonOnline/">Online</a></li>
          
            <li><a href="/docs/tools/LogonTransfer/">Transfer</a></li>
          
            <li><a href="/docs/tools/LogonVpm/">Variable Property Mapping</a></li>
          
            <li><a href="/docs/tools/NoJa/">Setting up New Languages</a></li>
          
            <li><a href="/docs/tools/LogonIdiosyncrasies/">Idiosyncrasies</a></li>
          
            <li><a href="/docs/tools/LogonWishlist/">Wishlist</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Grammar Tips</span>
        

        
        <ul>
          
            <li><a href="/docs/tools/GrammarPerformance/">Grammar Performance</a></li>
          
            <li><a href="/docs/tools/VersionControlForGrammarDevelopment/">Grammar Version Control</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Treebanking</span>
        

        
        <ul>
          
            <li><a href="/docs/tools/TreebankingTop/">Overview</a></li>
          
            <li><a href="/docs/tools/FftbTop/">Full Forest Treebanker (FFTB)</a></li>
          
            <li><a href="/docs/tools/FftbTreebankUpdateTutorial/">FFTB Treebank Update Tutorial</a></li>
          
            <li><a href="/docs/tools/FftbWishlist/">Full Forest Treebanker Wishlist</a></li>
          
            <li><a href="/docs/tools/ItsdbTreebanking/">[incr tsdb()] Treebanking</a></li>
          
            <li><a href="/docs/tools/ItsdbTreebanking_ItsdbAnnotation/">[incr tsdb()] Treebanking Annotation</a></li>
          
            <li><a href="/docs/tools/ItsdbTreebanking_ItsdbUpdating/">[incr tsdb()] Treebanking Updating</a></li>
          
            <li><a href="/docs/tools/ItsdbTreebanking_ItsdbExporting/">[incr tsdb()] Treebanking Exporting</a></li>
          
            <li><a href="/docs/tools/ItsdbTreebanking_ItsdbModeling/">[incr tsdb()] Treebanking Modeling</a></li>
          
            <li><a href="/docs/tools/ItsdbTreebanking_ItsdbUpdating/">[incr tsdb()] Treebanking Updating</a></li>
          
            <li><a href="/docs/tools/ItsdbCustomization/">[incr tsdb()] Treebanking Customization</a></li>
          
            <li><a href="/docs/tools/ItsdbTreebanking_ItsdbModeling/">[incr tsdb()] Treebanking Modeling</a></li>
          
            <li><a href="/docs/tools/IndraTreebanking/">Indra</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Formats</span>
        

        
        <ul>
          
            <li><a href="/docs/tools/DelphinRFCs/">Delphin RFCs</a></li>
          
            <li><a href="/docs/tools/PredicateRfc/">Predicate RFC</a></li>
          
            <li><a href="/docs/tools/MrsRFC/">MRS Format RFC</a></li>
          
            <li><a href="/docs/tools/MrsIsomorphism/">MRS Isomorphism</a></li>
          
            <li><a href="/docs/tools/EdsTop/">EDS Format</a></li>
          
            <li><a href="/docs/tools/EdsConversion/">EDS Conversion</a></li>
          
            <li><a href="/docs/tools/EdsGeneration/">EDS Generation</a></li>
          
            <li><a href="/docs/tools/SemiRfc/">SEM-I RFC</a></li>
          
            <li><a href="/docs/tools/TdlRFC/">TDL RFC</a></li>
          
            <li><a href="/docs/tools/TsqlRfc/">TSQL RFC</a></li>
          
            <li><a href="/docs/tools/GrammarVersionRfc/">Grammar Version RFC</a></li>
          
            <li><a href="/docs/tools/GrammarConfigurationRfc/">Grammar Configuration RFC</a></li>
          
            <li><a href="/docs/tools/TsdbSchemaRfc/">TSDB Schema RFC</a></li>
          
            <li><a href="/docs/tools/MatrixChoicesRfc/">Matrix Choices RFC</a></li>
          
            <li><a href="/docs/tools/RmrsTop/">(R)MRS Overview</a></li>
          
            <li><a href="/docs/tools/RmrsWellformedness/">(R)MRS Wellformedness</a></li>
          
            <li><a href="/docs/tools/RmrsPos/">(R)MRS Predicate Naming</a></li>
          
            <li><a href="/docs/tools/RmrsSpan/">(R)MRS Span</a></li>
          
            <li><a href="/docs/tools/RmrsDesign/">(R)MRS Design</a></li>
          
            <li><a href="/docs/tools/RmrsParaphrasing/">(R)MRS Paraphrasing</a></li>
          
            <li><a href="/docs/tools/RmrsModel/">(R)MRS Model</a></li>
          
            <li><a href="/docs/tools/RmrsDistributional/">(R)MRS Distributional</a></li>
          
            <li><a href="/docs/tools/RmrsSemi/">(R)MRS Semi</a></li>
          
            <li><a href="/docs/tools/RmrsDmrs/">(R)MRS Dmrs</a></li>
          
            <li><a href="/docs/tools/RmrsFaq/">(R)MRS Faq</a></li>
          
            <li><a href="/docs/tools/RmrsDiscussions/">(R)MRS Discussions</a></li>
          
            <li><a href="/docs/tools/TransferRules/">Transfer Rules</a></li>
          
            <li><a href="/docs/tools/FormatSpecifications/">Format Specifications</a></li>
          
            <li><a href="/docs/tools/ErgGml/">Grammar Markup Language</a></li>
          
            <li><a href="/docs/tools/SmafTop/">SMAF</a></li>
          
            <li><a href="/docs/tools/SmafLkb/">SMAF in LKB</a></li>
          
            <li><a href="/docs/tools/SmafPet/">SMAF in PET</a></li>
          
            <li><a href="/docs/tools/SmafSample/">SMAF Sample</a></li>
          
            <li><a href="/docs/tools/SmafDtd/">SMAF DTD</a></li>
          
            <li><a href="/docs/tools/SafTop/">SAF Overview</a></li>
          
            <li><a href="/docs/tools/SafDtd/">SAF DTD</a></li>
          
            <li><a href="/docs/tools/IconsSpecs/">Icons Specs</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
        <p>This page was adapted from <a href="https://delph-in.github.io/docs/grammars/JacyGeneration">JacyGeneration</a> by
MichaelGoodman, and therefore many of the examples are
from the <a href="https://delph-in.github.io/docs/grammars/JacyTop">JACY</a> Grammar.</p>

<p>Contents</p>

<ol>
  <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#Overview">Overview</a></li>
  <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#Generating_Semantically_Empty_Lexical_Entries_.28trigger.mtr.29">Generating Semantically Empty Lexical Entries
(trigger.mtr)</a>
    <ol>
      <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#How_to_list_semantically_empty_lexical_entries">How to list semantically empty lexical
entries</a></li>
      <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#ToDo">ToDo</a></li>
    </ol>
  </li>
  <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#Generating_Unknown_Words">Generating Unknown Words</a></li>
  <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#Selective_Generation_.28globals.lisp.29">Selective Generation
(globals.lisp)</a>
    <ol>
      <li>
        <ol>
          <li>
            <ol>
              <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#In_Ace">In Ace</a></li>
            </ol>
          </li>
        </ol>
      </li>
    </ol>
  </li>
  <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#Other_Notes">Other Notes</a>
    <ol>
      <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#Make_generation_faster_.28globals.lsp.29">Make generation faster
(globals.lsp)</a></li>
      <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#Fixup_MRS_.28mrsglobals.lsp.29">Fixup MRS (mrsglobals.lsp)</a></li>
      <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#Reload_generation_rules_without_reindexing">Reload generation rules without
reindexing</a></li>
      <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#MRS_Semantic_Equivalence_Check">MRS Semantic Equivalence
Check</a></li>
      <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#Checking_the_Generator_Index">Checking the Generator Index</a></li>
    </ol>
  </li>
  <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#Trouble_Shooting">Trouble Shooting</a>
    <ol>
      <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#Morphology">Morphology</a></li>
      <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#C-CONT">C-CONT</a></li>
      <li><a href="https://delph-in.github.io/docs/tools/LkbGeneration#Loading_and_Activating_a_Generation_Model">Loading and Activating a Generation
Model</a></li>
    </ol>
  </li>
</ol>

<h1 id="overview">Overview</h1>

<p>Described below is generation using the mtr rule formalism developed in
the LOGON project.</p>

<p>Three files control the process mt.lsp, mtr.lsp and trigger.mtr. They
are loaded by the script file.</p>

<h1 id="generating-semantically-empty-lexical-entries-triggermtr">Generating Semantically Empty Lexical Entries (trigger.mtr)</h1>

<p>This file controls when to add lexical entries with empty semantics to
the generator chart. If they were all added all the time then the chart
would get too big.</p>

<ul>
  <li>example of a rule for the past tense ending:</li>
</ul>

<!-- -->

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ta-end_gr := arg0e_gr &amp;
[ CONTEXT [ RELS &lt;! [ ARG0.E.TENSE past ] !&gt; ],
  FLAGS.TRIGGER "ta-end" ].
</code></pre></div></div>

<ul>
  <li>example of a rule for copulas:</li>
</ul>

<p>– You can use regular expressions in the strings: “~.*_a_”</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>;; should use lexical type for na-adj
na-cop-lex_gr := arg0e_gr &amp;
[ CONTEXT [ RELS &lt;! [ PRED "~.*_a_"] !&gt; ],
  FLAGS.TRIGGER "na-cop-lex" ].
</code></pre></div></div>

<ul>
  <li>Example of a case marker:</li>
</ul>

<!-- -->

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ;;; ARG1 is ga
ga_gr_1 := arg0e_gr &amp;
[ CONTEXT [ RELS &lt;!  [ ARG0.E.PASS -, ARG1 individual &amp; #i ] !&gt; ],
  FLAGS [SUBSUME &lt; #i &gt;,
         TRIGGER "ga" ]].
</code></pre></div></div>

<h2 id="how-to-list-semantically-empty-lexical-entries">How to list semantically empty lexical entries</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>;;;
;;; automatically generate rules for all semantically empty lexical entries
;;; which don't already have trigger rules
;;;
 (loop
     with *package* = (find-package :lkb)
     for id in mrs::*empty-semantics-lexical-entries*
     do
     (unless (or #+:mt
                 (gethash id mt::*transfer-triggers*)
                 (member id mrs::*gen-rule-ids*))
       (format
        t
        "~(~a~)_gr := generator_rule &amp;~%~
         [ CONTEXT [ RELS &lt;! [ PRED \"non_existing_rel\" ] !&gt; ],~%  ~
           FLAGS.TRIGGER \"~(~a~)\" ].~%~%"
        id id)))
;;;                              (25-dec-04; oe, 13-Jun-06 FCB)
</code></pre></div></div>

<p>This produces trigger rules of the form:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tomae_numcl_gr := generator_rule &amp;
[ CONTEXT [ RELS &lt;! [ PRED "non_existing_rel" ] !&gt; ],
  FLAGS.TRIGGER "tomae_numcl" ].
</code></pre></div></div>

<p>which should go into the trigger.mtr file until you decide how to
trigger them.</p>

<p>Note, before redoing this (to see if you need any changes for a new
version of the grammar) you should:</p>

<ul>
  <li>delete all existing automatically generated rules</li>
  <li>delete the lexicon and generator cache</li>
  <li>load the grammar, index for generation</li>
  <li>run the above loop and then add to the trigger file</li>
</ul>

<h2 id="todo">ToDo</h2>

<ul>
  <li>It would be nice to be able to access the grammar’s type hierarchy
when writing trigger rules.</li>
</ul>

<h1 id="generating-unknown-words">Generating Unknown Words</h1>

<p>You can trigger the generation of unknown words in the LKB by
instantiating *generic-lexical-entries*. There is an example of this
in the ERG’s global.lsp file.</p>

<h1 id="selective-generation-globalslisp">Selective Generation (globals.lisp)</h1>

<p>You can block generation of some non-empty predicates by putting it in
the list *duplicate-lex-ids* in globals.lisp. <a href="https://delph-in.github.io/docs/grammars/JacyTop">Jacy</a>
currently does this to block informal and variant forms for which we
have no available filter. Note that this is a list of lex-ids, not
predicate names.</p>

<p><strong>Note</strong>: If you want this list to also be seen by <a href="https://delph-in.github.io/docs/tools/AceTop">ace</a>, you
need to move it to a separate file (see a recent ERG for examples of how
to do this).</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(setf *duplicate-lex-ids*
  '(;; s-end1-decl-lex - emphatic sentence enders
    ga-sap keredomo-send kedomo-send ga-sap kedo-send shi-send
    yo-2 yo-3 keredo-send exclamation-mark ze zo zo-2
    ;; s-end1-decl-minusahon-lex - emphatic sentence enders
    i-emp
    ;; variant forms of numbers (hankaku)
    zero_card_a one_card_a two_card_a three_card_a four_card_a
    five_card_a six_card_a seven_card_a eight_card_a nine_card_a
    ;; variant forms of numbers (zenkaku)
    zero_card one_card two_card three_card four_card
    five_card six_card seven_card eight_card nine_card
    ;;; indefinite pronouns FIXME - improve semantics
    donna douiu dono-det
    ))
</code></pre></div></div>

<p>You can also block rules from being used in generation by adding them to
*gen-ignore-rules*, also in globals.lisp.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(setf *gen-ignore-rules*
  '(punct_bang_orule)
</code></pre></div></div>

<h4 id="in-ace">In Ace</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>generation-ignore-lexemes := "../lkb/nogen-lex.set".
generation-ignore-rules   := "../lkb/nogen-rules.set".
</code></pre></div></div>

<h1 id="other-notes">Other Notes</h1>

<h2 id="make-generation-faster-globalslsp">Make generation faster (globals.lsp)</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(setf *gen-packing-p* t)
(setf *gen-filtering-p* t)
(setf *packing-restrictor*  '(RELS HCONS ORTH STEM RULE-NAME))
</code></pre></div></div>

<h2 id="fixup-mrs-mrsglobalslsp">Fixup MRS (mrsglobals.lsp)</h2>

<h2 id="reload-generation-rules-without-reindexing">Reload generation rules without reindexing</h2>

<p>This is useful when you are debugging.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(progn
  (mt:initialize-transfer)
  (mt:read-transfer-rules
   (list
    "~/delphin/grammars/japanese/generation.mtr")
   "Generator Triggger Rules"
   :filter nil :task :trigger :recurse nil :subsume nil))
</code></pre></div></div>

<h2 id="mrs-semantic-equivalence-check">MRS Semantic Equivalence Check</h2>

<p>At the end of generation, the lkb checks that the MRS of the generated
string is subsumed by the input MRS. That is, it contains all the
information in the input. You can omit the check entirely by setting
*bypass-equality-check* to t. You can relax the check by setting the
post-generation semantic equivalence check to filter mode, i.e. prefer
results that satisfy the test when available, but if no outputs pass the
equivalence test at all, then output all complete generator results.
This is set in lkb/globals.lsp.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>; output all complete generated results
(setf *bypass-equality-check* t)

; prefer results with MRS subsumed by the input
; but if none exist then output all complete generated results
(setf *bypass-equality-check* :filter)
</code></pre></div></div>

<h2 id="checking-the-generator-index">Checking the Generator Index</h2>

<p>You can manually see if a predicate is on the generator’s index with the
following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(gethash "_inu_n_rel" mrs::*relation-index*)
</code></pre></div></div>

<p>Where _inu_n_rel is the relation name.</p>

<h1 id="trouble-shooting">Trouble Shooting</h1>

<h2 id="morphology">Morphology</h2>

<p>If you try to generate but nothing happens for a very long time, even
though you have a very low number of edges set, the problem may be in
the morphology. You can test the morphology by running
batch-check-morphology: this checks all inflectional forms for all
words, so can also be very slow.</p>

<p>A quicker test is to comment out all inflectional rules except those
used in a single test sentence, reload the grammar and then try
generating that sentence.</p>

<h2 id="c-cont">C-CONT</h2>

<p>If a rule introduces a predicate somewhere other than in the C-CONT,
then it will not be indexed and generation will fail with the warning:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Warning: invalid predicates:|"predicate-name"|
</code></pre></div></div>

<p>Make sure all predicates are either in lexical entries or C-CONT.</p>

<h2 id="loading-and-activating-a-generation-model">Loading and Activating a Generation Model</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#+:tsdb
 (tsdb::read-model (lkb-pathname (parent-directory) "jhpstg.g.mem"))
#+:tsdb
 (setf *unpacking-scoring-hook* #'tsdb::mem-score-configuration)
</code></pre></div></div>

<p>This should work in the LKB SVN as well as the LOGON tree, and is the
basis for ranking and selective unpacking in generation and also in
parsing.</p>

<p>Last update: 2020-05-21 by JohnCarroll [<a href="https://github.com/delph-in/docs/wiki/LkbGeneration/_edit">edit</a>]</p>

        
      </section>

      <footer class="page__meta">
        
        


        


      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

<!--Scroll the navbar to the current page-->
<script type="text/javascript">
  let el = document.querySelector('.nav__list .active');
  if(el){
    el.scrollIntoView({block: "center", inline: "start"});
  }
</script>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/docs/tools/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 DELPH-IN. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/docs/tools/assets/js/main.min.js"></script>




<script src="/docs/tools/assets/js/lunr/lunr.min.js"></script>
<script src="/docs/tools/assets/js/lunr/lunr-store.js"></script>
<script src="/docs/tools/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
